<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="css/flot/layout.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/jquery.flot.js"></script>
 </head>
    <body>
    <h1>Flot Examples</h1>

    <div id="placeholder" style="width:600px;height:300px;"></div>

    <p id="choices">Show:</p>

    <p>Simple example. You don't need to specify much to get an
       attractive look. Put in a placeholder, make sure you set its
       dimensions (otherwise the plot library will barf) and call the
       plot function with the data. The axes are automatically
       scaled.</p>

<script type="text/javascript">
$(function () {
    var d_carrefour = [[0, 0]];
    var d_extra = [[0, 0]];
    var d_stmarche = [[0, 0]];
    var d_wallmart = [[0, 0]];
    var d_dia = [[0, 0]];
    var d_pao_de_acucar = [[0, 0]];

    function randomIntFromInterval(min,max) {
        return Math.floor(Math.random()*(max-min+1)+min);
    }

    for (var i = 1; i < 9; i++) {
        // d_extra = [[0, 0], [1, -23], [2, -40], [3, -20], [4, -40], [5, 20], [6, 0], [7, 0]];
        
        d_carrefour.push([i, randomIntFromInterval(-60, 40)]);
        d_extra.push([i, randomIntFromInterval(-60, 40)]);
        d_stmarche.push([i, randomIntFromInterval(-60, 40)]);
        d_wallmart.push([i, randomIntFromInterval(-60, 40)]);
        d_dia.push([i, randomIntFromInterval(-60, 40)]);
        d_pao_de_acucar.push([i, randomIntFromInterval(-60, 40)]);
    }

    console.log(d_carrefour);

    var datasets = {
        "Carrefour": {
            label: "Carrefour",
            data: d_carrefour,
            points: { show: true },
            lines: { show: true }, 
        },
        "Extra": {
            label: "Extra",
            data: d_extra,
            points: { show: true },
            lines: { show: true }, 
        },
        "St. Marche": {
            label: "St. Marche",
            data: d_stmarche,
            points: { show: true },
            lines: { show: true }, 
        },
        "Wall Mart": {
            label: "Wall Mart",
            data: d_wallmart,
            points: { show: true },
            lines: { show: true }, 
        },
        "Dia": {
            label: "Dia",
            data: d_dia,
            points: { show: true },
            lines: { show: true }, 
        },
        "Pão de Açucar": {
            label: "Pão de Açucar",
            data: d_pao_de_acucar,
            points: { show: true },
            lines: { show: true },
        }
    };

    var i = 0;
    $.each(datasets, function(key, val) {
        val.color = i;
        ++i;
    });

    var choiceContainer = $("#choices");

    $.each(datasets, function(key, val) {
        choiceContainer.append('<br/><input type="checkbox" name="' + key +
                               '" checked="checked" id="id' + key + '">' +
                               '<label for="id' + key + '">'
                                + val.label + '</label>');
    });

    choiceContainer.find("input").click(plotAccordingToChoices);

    function plotAccordingToChoices() {
        var data = [];

        choiceContainer.find("input:checked").each(function () {
            var key = $(this).attr("name");
            if (key && datasets[key])
                data.push(datasets[key]);
        });

        if (data.length > 0)
            $.plot($("#placeholder"), data, {
                yaxis: {
                    ticks: [[0, '0'], [20, '20%'], [40, '40%'],
                    [-20, '-20%'], [-40, '-40%'], [-60, '-60%']],
                        min: -60,
                        max: 40
                    },
                xaxis: {
                    show: true,
                    position: "bottom",
                    min: null,
                    max: 8,
                    ticks: [[1, "Set 26"],
                        [2, "Set 30"],
                        [3, "Out 2"],
                        [4, "Out 4"],
                        [5, "Out 6"],
                        [6, "Out 8"],
                        [7, "Out 10"],
                        [8, "Out 14"]],
                    tickColor: "#efefef"
                }
            });
    }

    plotAccordingToChoices();

    // $.plot($("#placeholder"), [{
    //     label: "Carrefour",
    //     data: d_carrefour,
    //     points: { show: true },
    //     lines: { show: true }, 
    // },
    // {
    //     label: "Extra",
    //     data: d_extra,
    //     points: { show: true },
    //     lines: { show: true }, 
    // },
    // {
    //     label: "St. Marche",
    //     data: d_stmarche,
    //     points: { show: true },
    //     lines: { show: true }, 
    // },
    // {
    //     label: "Wall Mart",
    //     data: d_wallmart,
    //     points: { show: true },
    //     lines: { show: true }, 
    // },
    // {
    //     label: "Dia",
    //     data: d_dia,
    //     points: { show: true },
    //     lines: { show: true }, 
    // },
    // {
    //     label: "Pão de Açucar",
    //     data: d_pao_de_acucar,
    //     points: { show: true },
    //     lines: { show: true },
    // }], {
    //     xaxis: {
    //         show: true,
    //         position: "bottom",
    //         min: null,
    //         max: 8,
    //         ticks: [[1, "Set 26"],
    //             [2, "Set 30"],
    //             [3, "Out 2"],
    //             [4, "Out 4"],
    //             [5, "Out 6"],
    //             [6, "Out 8"],
    //             [7, "Out 10"],
    //             [8, "Out 14"]],
    //         tickColor: "#efefef"
    //     },
    //     yaxis: {
    //         ticks: [[0, '0'], [20, '20%'], [40, '40%'],
    //                 [-20, '-20%'], [-40, '-40%'], [-60, '-60%']],
    //         min: -60,
    //         max: 40
    //     }
    // });
});
</script>

 </body>
</html>
